(function(){window.addEventListener("load",()=>{document.querySelectorAll(".gallery").forEach(e=>new Packery(e,{percentPosition:!0,gutter:5,resize:!0}));const e=document.createElement("div");e.className="image-fullscreen",Object.assign(e.style,{display:"none",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.85)",justifyContent:"center",alignItems:"center",zIndex:9999,cursor:"pointer"});const t=document.createElement("img");Object.assign(t.style,{maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain",cursor:"default"}),e.appendChild(t);const o=document.createElement("div");o.className="overlay-arrow left-arrow",o.textContent="〈";const i=document.createElement("div");i.className="overlay-arrow right-arrow",i.textContent="〉",e.append(o,i),document.body.appendChild(e);const s=document.querySelectorAll(".gallery img");let n=null;function c(o){n=o,t.src=s[o].src,e.style.display="flex"}function r(){e.style.display="none",n=null}function a(e){if(n===null)return;const o=(n+e+s.length)%s.length;t.classList.add("fading"),t.addEventListener("transitionend",function e(){t.removeEventListener("transitionend",e),n=o,t.src=s[n].src,requestAnimationFrame(()=>{t.classList.remove("fading")})})}s.forEach((e,t)=>{e.style.cursor="zoom-in",e.addEventListener("click",e=>{c(t),e.stopPropagation()})}),e.addEventListener("click",r),document.addEventListener("keydown",t=>{if(e.style.display!=="flex")return;t.key==="ArrowRight"?a(1):t.key==="ArrowLeft"?a(-1):t.key==="Escape"&&r()}),o.addEventListener("click",e=>{e.stopPropagation(),a(-1)}),i.addEventListener("click",e=>{e.stopPropagation(),a(1)})})})()